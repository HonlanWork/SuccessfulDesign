<style>
#main {
    padding: 30px 6%;
    box-shadow: 2px 2px 3px rgba(20, 20, 20, 0.3);
    border-bottom-right-radius: 5px;
    border-bottom-left-radius: 5px;
}

#main ul.admin-nav {
    list-style-type: none;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding-left: 0;
    margin-bottom: 10px;
}

#main ul.admin-nav p {
    margin-bottom: 0;
    padding: 10px 20px;
    border-bottom: 1px solid #ddd;
}

#main ul.admin-nav p:hover {
    cursor: pointer;
}

#main ul.admin-nav li {
    border-bottom: 1px solid #ddd;
    font-size: 13px;
    padding: 8px 20px;
    padding-left: 30px;
    background-color: #eee;
}

#main ul.admin-nav a {
    text-decoration: none;
    color: #bbb;
}

#main ul.admin-nav a:hover {
    text-decoration: none;
    color: #888;
}

#main ul.admin-nav a:last-child {
    border-bottom: none;
}

#main table {
    font-size: 12px;
    margin-top: 20px;
}

#main input.form-control {
    width: 180px;
    position: absolute;
    top: -20px;
    right: 0;
}
</style>
<div class="row">
    <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2">
        <ul class="admin-nav">
            <p>比赛管理</p>
            <a href="{:U('Admin/contest_pay_confirm')}">
                <li>审核支付</li>
            </a>
            <a href="{:U('Admin/submissions')}">
                <li>作品管理</li>
            </a>
            <a href="{:U('Admin/judge_first')}">
                <li>第一轮评审</li>
            </a>
            <a href="{:U('Admin/judge_second')}">
                <li>第二轮评审</li>
            </a>
        </ul>
        <ul class="admin-nav">
            <p>用户管理</p>
            <a href="{:U('Admin/users')}">
                <li>所有用户</li>
            </a>
        </ul>
        <ul class="admin-nav">
            <p>网站管理</p>
            <a href="{:U('Admin/translations')}">
                <li>编辑翻译</li>
            </a>
        </ul>
    </div>
    <div class="col-xs-12 col-sm-10 col-md-10 col-lg-10">
        <h3 style="margin-top:10px;margin-bottom:20px;">作品管理<a href="{:U('Admin/export_excel')}" style="margin-left:20px;margin-right:10px;font-size:12px;" class="btn btn-success">导出excel</a></h3>
        <div style="position:relative;">
            <input type="text" class="form-control">
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#notpaid" aria-controls="notpaid" role="tab" data-toggle="tab">未支付</a></li>
                <li role="presentation"><a href="#paid_but_notsubmitted" aria-controls="paid_but_notsubmitted" role="tab" data-toggle="tab">已支付未提交</a></li>
                <li role="presentation"><a href="#submitted" aria-controls="submitted" role="tab" data-toggle="tab">已提交</a></li>
            </ul>
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane fade in active" id="notpaid">
                    <table class="table table-hover">
                        <tr>
                            <th>作品中文名</th>
                            <th>作品英文名</th>
                            <th>作品类别</th>
                            <th>作者邮箱</th>
                            <th>作者公司</th>
                            <th>操作</th>
                        </tr>
                        <foreach name="notpaid" item="v">
                            <tr class="data">
                                <td>{$v.titlec}</td>
                                <td>{$v.titlee}</td>
                                <td>{$v.category}</td>
                                <td>{$v.email}</td>
                                <td>{$v.companyc}</td>
                                <td style="min-width:120px;">
                                    <p><a href="{:U('User/submission', array('id'=>$v['id']))}">详情</a></p>
                                    <p><a href="{:U('Admin/mark_as_paid', array('id'=>$v['id']))}">改为已支付</a></p>
                                    <p><a href="{:U('Admin/mark_as_submitted', array('id'=>$v['id']))}">改为已提交</a></p>
                                </td>
                            </tr>
                        </foreach>
                    </table>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="paid_but_notsubmitted">
                    <table class="table table-hover">
                        <tr>
                            <th>作品中文名</th>
                            <th>作品英文名</th>
                            <th>作品类别</th>
                            <th>作者邮箱</th>
                            <th>作者公司</th>
                            <th>操作</th>
                        </tr>
                        <foreach name="paid_but_notsubmitted" item="v">
                            <tr class="data">
                                <td>{$v.titlec}</td>
                                <td>{$v.titlee}</td>
                                <td>{$v.category}</td>
                                <td>{$v.email}</td>
                                <td>{$v.companyc}</td>
                                <td style="min-width:120px;">
                                    <p><a href="{:U('User/submission', array('id'=>$v['id']))}">详情</a></p>
                                    <p><a href="{:U('Admin/mark_as_notpaid', array('id'=>$v['id']))}">改为未支付</a></p>
                                    <p><a href="{:U('Admin/mark_as_submitted', array('id'=>$v['id']))}">改为已提交</a></p>
                                </td>
                            </tr>
                        </foreach>
                    </table>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="submitted">
                    <table class="table table-hover">
                        <tr>
                            <th>作品中文名</th>
                            <th>作品英文名</th>
                            <th>作品类别</th>
                            <th>作者邮箱</th>
                            <th>作者公司</th>
                            <th>操作</th>
                        </tr>
                        <foreach name="submitted" item="v">
                            <tr class="data">
                                <td>{$v.titlec}</td>
                                <td>{$v.titlee}</td>
                                <td>{$v.category}</td>
                                <td>{$v.email}</td>
                                <td>{$v.companyc}</td>
                                <td style="min-width:120px;">
                                    <p><a href="{:U('User/submission', array('id'=>$v['id']))}">详情</a></p>
                                    <p><a href="{:U('Admin/mark_as_notpaid', array('id'=>$v['id']))}">改为未支付</a></p>
                                    <p><a href="{:U('Admin/mark_as_notsubmitted', array('id'=>$v['id']))}">改为未提交</a></p>
                                </td>
                            </tr>
                        </foreach>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
$(document).ready(function() {
    $('#main input.form-control').keyup(function(event) {
        var keyword = $(this).val();
        if (keyword == '') {
            $('#main table .data').show();
        }
        else {
            $('#main table .data').each(function(index, el) {
                var flag = false;
                var $p = $(this);
                $p.children('td').each(function(i, e) {
                    if ($(this).text().indexOf(keyword) >= 0) {
                        flag = true;
                    }
                });
                if (flag) {
                    $p.show();
                }
                else {
                    $p.hide();
                }
            });
        }
    });
});
</script>